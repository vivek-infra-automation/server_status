<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevOps Server Monitor</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .tool-name {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .status-box { 
            padding: 25px; 
            margin: 20px auto; 
            max-width: 700px; 
            border-radius: 15px; 
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
        }
        .status-box h3 { 
            margin: 15px 0 10px 0; 
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 1.2em;
        }
        .basic-info { background: linear-gradient(45deg, #ff9a9e, #fecfef); color: #333; }
        .network-info { background: linear-gradient(45deg, #a8edea, #fed6e3); color: #333; }
        .system-info { background: linear-gradient(45deg, #ffecd2, #fcb69f); color: #333; }
        .php-info { background: linear-gradient(45deg, #667eea, #764ba2); color: white; }
        .request-info { background: linear-gradient(45deg, #f093fb, #f5576c); color: white; }
        .success { 
            background: linear-gradient(45deg, #56ab2f, #a8e6cf); 
            color: #155724; 
            border: 2px solid #4caf50;
        }
        .error { 
            background: linear-gradient(45deg, #ff416c, #ff4b2b); 
            color: white; 
            border: 2px solid #f44336;
        }
        .server-details {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .info-section {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid;
        }
        .basic { border-left-color: #ff9a9e; }
        .network { border-left-color: #a8edea; }
        .system { border-left-color: #ffecd2; }
        .php { border-left-color: #667eea; }
        .request { border-left-color: #f093fb; }
        strong { color: #ffd700; }
    </style>
</head>
<body>
    <div class="header">
        <div class="tool-name">DevOps Server Monitor</div>
        <p style="font-size: 1.2em; margin: 0;">Real-time Server & Database Monitoring Tool</p>
    </div>
    
    <h2 style="text-align: center; margin-bottom: 20px;">üîó Database Connection Status</h2>
    <div id="status"></div>

    <h2 style="text-align: center; margin: 40px 0 20px 0;">üñ•Ô∏è Server Information Dashboard</h2>
    <div id="server-info" class="status-box server-details"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch('check_db.php')
                .then(response => response.json())
                .then(data => {
                    const statusDiv = document.getElementById('status');
                    statusDiv.textContent = data.message;
                    if (data.status === 'success') {
                        statusDiv.className = 'status-box success';
                    } else {
                        statusDiv.className = 'status-box error';
                    }
                })
                .catch(error => {
                    const statusDiv = document.getElementById('status');
                    statusDiv.textContent = 'An error occurred during the request.';
                    statusDiv.className = 'status-box error';
                    console.error('Error:', error);
                });

            fetch('server_info.php')
                .then(response => response.json())
                .then(data => {
                    const serverDiv = document.getElementById('server-info');
                    serverDiv.innerHTML = `
                        <div class="info-grid">
                            <div class="info-section basic">
                                <h3 class="basic-info">üìã Basic Info</h3>
                                <strong>Server:</strong> ${data.server}<br>
                                <strong>PHP Version:</strong> ${data.php_version}<br>
                                <strong>Server Time:</strong> ${data.server_time}<br>
                                <strong>OS:</strong> ${data.os}<br>
                            </div>
                            
                            <div class="info-section network">
                                <h3 class="network-info">üåê Network</h3>
                                <strong>Server IP:</strong> ${data.server_ip}<br>
                                <strong>Hostname:</strong> ${data.hostname}<br>
                                <strong>Client IP:</strong> ${data.client_ip}<br>
                                <strong>Server Port:</strong> ${data.server_port}<br>
                                <strong>HTTPS:</strong> ${data.https}<br>
                                <strong>Protocol:</strong> ${data.server_protocol}<br>
                            </div>
                            
                            <div class="info-section system">
                                <h3 class="system-info">üíæ System Resources</h3>
                                <strong>Memory Usage:</strong> ${data.memory_usage}<br>
                                <strong>Memory Peak:</strong> ${data.memory_peak}<br>
                                <strong>Disk Free:</strong> ${data.disk_free}<br>
                                <strong>Disk Total:</strong> ${data.disk_total}<br>
                                <strong>Load Average:</strong> ${data.load_average}<br>
                            </div>
                            
                            <div class="info-section php">
                                <h3 class="php-info">‚öôÔ∏è PHP Config</h3>
                                <strong>Memory Limit:</strong> ${data.memory_limit}<br>
                                <strong>Max Execution:</strong> ${data.max_execution_time}<br>
                                <strong>Upload Max:</strong> ${data.upload_max_filesize}<br>
                                <strong>Timezone:</strong> ${data.timezone}<br>
                            </div>
                        </div>
                        
                        <div class="info-section request" style="margin-top: 20px;">
                            <h3 class="request-info">üì° Request Info</h3>
                            <strong>Method:</strong> ${data.request_method} | 
                            <strong>URI:</strong> ${data.request_uri}<br>
                            <strong>Document Root:</strong> ${data.document_root}<br>
                            <strong>Server Name:</strong> ${data.server_name}<br>
                        </div>
                    `;
                })
                .catch(error => {
                    const serverDiv = document.getElementById('server-info');
                    serverDiv.innerHTML = '<h3>‚ùå Error</h3>Unable to load server information.';
                    serverDiv.className = 'status-box error';
                });
        });
    </script>
</body>
</html>
